<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Take Attendance</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <h1> Take Attendance </h1>
  <% ['CSE 3421', 'CSE 4001', 'CSE 4002', 'CSE 4280'].forEach((className, i) => { %>
    <div class="class-container" onclick="toggleStudents(<%= i %>)">
      <%= className %>
    </div>
    <div id="students<%= i %>" class="student-list">
      <% ['Robert Plant', 'Axl Rose ', 'Eddie Van Halen', 'Ozzy Osbourne', 'David Guetta', 'Calvin Harris', 'Lil Wayne', 'Rihanna', 'Avici', 'Barack Obama'].forEach(student => { %>
        <div class="student-item">
          <span class="student-name"><%= student %></span>
          <button onclick="toggleAttendance(this)">Absent</button>
        </div>
      <% }) %>
      <!-- Add a form for submitting attendance -->
      <form id="attendanceForm<%= i %>" class="attendance-form" onsubmit="submitAttendance(event)">
        <input type="hidden" name="className" value="<%= className %>">
        <button type="submit" class="submit-button">Submit</button>
      </form>
    </div>
  <% }) %>
  <a href="/">Back to Home</a>

  <script>
    function toggleStudents(index) {
      var studentsList = document.getElementById('students' + index);
      studentsList.style.display = studentsList.style.display === 'block' ? 'none' : 'block';
    }

    function toggleAttendance(button) {
      button.textContent = button.textContent === 'Here' ? 'Absent' : 'Here';
    }

    function submitAttendance(event) {
      event.preventDefault();
      var form = event.target;
      var className = form.querySelector('input[name="className"]').value;
      // Simulate processing attendance
      setTimeout(function() {
        alert("Attendance for " + className + " has been processed!");
        window.location.href = "/"; // Redirect to the home page
      }, 2000); // 2000 milliseconds = 2 seconds
    }
  </script>
</body>
</html>
